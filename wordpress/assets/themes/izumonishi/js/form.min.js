document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".form_block"),t=e.querySelector('input[type="submit"]'),r={sender_name:{element:document.getElementById("name"),errorSelector:".name .error_label",errorMessage:"お名前は必須です。",validate:e=>/[\u3040-\u30FF\u4E00-\u9FFF]/.test(e.trim())},company:{element:document.getElementById("company"),errorSelector:".company .error_label",errorMessage:"会社名は必須です。",validate:e=>e.trim().length>0},email:{element:document.getElementById("email"),errorSelector:".email .error_label",errorMessage:"有効なメールアドレスは必須です。",validate:e=>/^([\w\d-]+)(\.[\w\d-]+)*@([\w\d-]+)(\.[\w\d-]+)*(\.([a-zA-Z]{2,5}|[\d]{1,3})){1,2}$/.test(e.trim())},tel:{element:document.getElementById("tel"),errorSelector:".tel .error_label",errorMessage:"有効な電話番号は必須です。",validate:e=>/^(\d{2,4}-\d{2,4}-\d{3,4}|\d{10,11})$/.test(e.trim())},content:{element:document.getElementById("content"),errorSelector:".content .error_label",errorMessage:"お問い合わせ内容は必須です。",validate:e=>e.trim().length>0},privacy:{element:document.getElementById("privacy"),errorSelector:".privacy_con .error_label",errorMessage:"プライバシーポリシーへの同意が必要です。",validate:()=>document.getElementById("privacy")?.checked??!1}};function n(e){return e.validate(e.element.value.trim())}function l(){return Object.values(r).every(n)}function o(){let e=null;if(Object.values(r).forEach((t=>{if(!t.element)return;const r=document.querySelector(t.errorSelector),l=t.element.closest(".item")||t.element.closest(".privacy_con");n(t)?(r.textContent="",l.classList.remove("error")):(r.textContent=t.errorMessage,l.classList.add("error"),e||(e=t.element))})),e){const t=-100;let r=e.getBoundingClientRect().top+window.pageYOffset+t;window.scrollTo({top:r,behavior:"smooth"}),"checkbox"!==e.type&&e.focus()}}if(e){Object.values(r).forEach((e=>{e.element&&"checkbox"!==e.element.type&&e.element.addEventListener("blur",(()=>{n(e)})),e.element.addEventListener("blur",(()=>{l()?t.classList.add("validated"):t.classList.remove("validated")}))}));const a=document.getElementById("privacy");a&&a.addEventListener("change",(()=>{l()?t.classList.add("validated"):t.classList.remove("validated")})),t.addEventListener("click",(function(e){l()||(e.preventDefault(),o(),t.classList.remove("validated"))})),e.addEventListener("submit",(function(e){l()||(e.preventDefault(),o(),t.classList.remove("validated"))}))}}));